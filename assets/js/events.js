var events = {
    events: [
        {
                id: '28 Apr 2019',
                title: 'Society Store Grand Re-opening for 2019',
                start: '28 Apr 2019 10:00',
                end:  '28 Apr 2019 13:00',
                allDay: false
        },
        {
                id: '30 Mar 2019',
                title: `Burnside Children's Get-together, start at 2pm`,
                start: '30 Mar 2019 14:00',
                end:  '30 Mar 2019 16:00',
                allDay: false
        },
        {
                id: '06 Apr 2019',
                title: 'Burnside Volunteering Day and Burn Bin from 10am',
                start: '06 apr 2019 10:00',
                end:  '06 Apr 2019 17:00',
                allDay: true
        },
        {
                id: '02 Mar 2019',
                title: 'Burnside Burn Bin',
                start: '02 Mar 2019 10:00',
                end:  '02 Mar 2019 14:00',
                allDay: false
        },
        {
                id: '27 Jan 2019',
                title: 'Potato Pick-up Day - Burnside Store',
                start: '27 Jan 2019 10:00',
                end:  '27 Jan 2019 12:00'
        },
        {
                id: '10 Apr 2019 19:30',
                title: 'Society AGM - 7:30pm start at St Martin\'s Church Hall, Suez Road',
                start: '10 Apr 2019 19:30',
                end:  '10 Apr 2019 21:00'
        },
        {
                id: '15 Dec 2018',
                title: 'Burnside Burn Bin',
                start: '15 Dec 2018 10:00',
                end:  '15 Dec 2018 14:00',
                allDay: false
        },
        {
                id: '17 Nov 2018',
                title: 'Burnside Burn Bin CANCELLED',
                start: '24 Nov 2018 10:00',
                end:  '24 Nov 2018 13:00',
                allDay: false
        },
        {
                id: '16 Oct 2018',
                title: 'Vinery Road Burn Bin',
                start: '03 Nov 2018 13:00',
                end:  '03 Nov 2018 16:00',
                allDay: false,
                forceURL: '/news.php?select=38'
        },
        {
                id: '07 Oct 2018',
                title: 'Burnside volunteering day',
                start: '27 Oct 2018 12:00',
                end:  '27 Oct 2018 19:00',
                allDay: false,
                forceURL: '/news.php?select=37'
        },
        {
                id: '09 Oct 2018',
                title: 'Trevor Taylor\'s funeral',
                start: '09 Oct 2018 14:15',
                end:  '09 Oct 2018 15:15',
                allDay: false,
                forceURL: '/news.php'
        },
        {
                id: '06 Oct 2018',
                title: 'Deadline for arrival by post or through the Burnside Store letterbox of rents and seed orders',
                start: '06 Oct 2018 00:00:00.0',
                end:  '06 Oct 2018',
                allDay: true
        },
        {
                id: '06 Oct 2018v2',
                title: 'Pay in person for rents and seed orders at Burnside Store',
                start: '06 Oct 2018 10:30',
                end:  '06 Oct 2018 12:00',
                allDay: false
        },
        {
                id: '07 Oct 2018',
                title: 'Pay in person for rents and seed orders at Vinery Pavillion',
                start: '07 Oct 2018 10:30',
                end:  '07 Oct 2018 12:00',
                allDay: false
        },
        {
                id: '30 Sep 2018',
                title: 'Burnside inaugural Children\'s Get-together - Revised Date',
                start: '30 Sep 2018 10:00',
                end:  '30 Sep 2018 12:00',
                allDay: false
        },
        {
                id: '08 Sep 2018',
                title: 'Burnside flag week',
                start: '08 Sep 2018 00:00:00.0',
                end:  '16 Sep 2018',
                allDay: true
        },
        {
                id: '02 Sep 2018 10:00',
                title: 'Burnside volunteering day',
                start: '02 Sep 10:00',
                end:  '02 Sep 17:00'
        },
        {
                id: '24 Jul 2018 19:30',
                title: 'Society AGM - 7:30pm start at St Martin\'s Church Hall, Suez Road',
                start: '24 Jul 2018 19:30',
                end:  '24 Jul 2018 21:00'
        },
        {
                id: '09 Sep 2018 12:00',
                title: 'Vinery Road summer party - details to follow',
                start: '09 Sep 2018 14:30',
                end:  '09 Sep 2018 17:00'
        },
        {
                id: '15 Sep 2018 12:00',
                title: 'Burnside summer party - details to follow',
                start: '15 Sep 2018 13:00',
                end:  '15 Sep 2018 17:00'
        },
        {
                id: '02 Jun 2018 10:00',
                title: 'Burnside burn bin 10-14 - weather permitting',
                start: '02 Jun 2018 10:00',
                end:  '02 Jun 2018 14:00'
        },
         {
                id: '24 Mar 2018 10:00v2',
                title: 'Burnside volunteering day',
                start: '24 Mar 2018 10:00',
                end:  '24 Mar 2018 17:00'
        },
        {
                id: '24 Mar 2018 10:00',
                title: 'Burnside burn bin 10-12 - weather permitting',
                start: '24 Mar 2018 10:00',
                end:  '24 Mar 2018 12:00'
        },
        {
                id: '10 Feb 2018 10:00',
                title: 'East Anglia Potato.',
                start: '10 Feb 2018 09:30',
                end:  '10 Feb 2018 13:30'
        },
        {
                id: '04 Feb 2018 10:00',
                title: 'Seed potatoes to be collected  See "News" for more details.',
                start: '04 Feb 2018 10:00',
                end:  '04 Feb 2018 12:00'
        },
        {
                id: '28 Jan 2018 13:30',
                title: 'Seedy Sunday, Trumpington Allotment Society 1:30-4.  Click for more details.',
                start: '28 Jan 2018 13:30',
                end:  '28 Jan 2018 16:00',
                forceURL: '/assets/docs/seedysunday2018.pdf'
        },
        {
                id: '25 Nov 2017 12:00',
                title: 'Burnside Burn Bin: 10-12 - weather permitting',
                start: '25 Nov 2017 10:00',
                end:  '25 Nov 2017 12:00'
        },
        {
                id: '18 Nov 2017 12:00',
                title: 'Burnside Burn Bin: 10-12',
                start: '18 Nov 2017 10:00',
                end:  '18 Nov 2017 12:00'
        },
        {
                id: '11 Nov 2017 12:00',
                title: '**CANCELLED** - Provisional Burnside Burn Bin: 10-12',
                start: '11 Nov 2017 10:00',
                end:  '11 Nov 2017 12:00'
        },
        {
                id: '28 Oct 2017 12:00',
                title: 'Official opening of Burnside toilet - plus food and games',
                start: '28 Oct 2017 12:00',
                xend:  '28 Oct 2017 16:00'
        },
        {
                id: '16 Sep 2017 10:00',
                title: 'Seed catalogues available - Vinery Pavilion, Burnside toilet store',
                start: '16 Sep 2017 10:30',
                xend:  '16 Sep 2017 16:00'
        },
        {
                id: '07 Oct 2017 10:00',
                title: 'Rent payment at Burnside',
                start: '07 Oct 2017 10:30',
                end:  '07 Oct 2017 12:00',
                newsid: 28
        },
        {
                id: '08 Oct 2017 10:00',
                title: 'Rent payment at Vinery',
                start: '08 Oct 2017 10:30',
                end:  '08 Oct 2017 12:00',
                newsid: 28
        },
        {
                id: '27 Aug 2017 10:00',
                title: 'Fenland Country Fair, Quy',
                start: '27 Aug 2017 09:00',
                end:  '27 Aug 2017 17:30',
                newsid: 27
        },
        {
                id: '28 Aug 2017 10:00',
                title: 'Fenland Country Fair, Quy',
                start: '28 Aug 2017 09:00',
                end:  '28 Aug 2017 17:30',
                newsid: 27
        },
        {
                id: '12 Aug 2017 10:00',
                title: 'Burnside volunteering day - 10:00-4:00',
                start: '12 Aug 2017 10:00',
                end:  '12 Aug 2017 16:00',
                newsid: 25
        },
        {
                id: '02 Sep 2017 10:00',
                title: 'Society summer party - Burnside 2:00-6:00',
                start: '02 Sep 2017 13:00',
                end:  '02 Sep 2017 18:00',
                newsid: 22
        },
        {
                id: '20 May 2017 10:00',
                title: 'Plant swap weekend  Saturday 20th May - 10:00-4:00',
                start: '20 May 2017 10:00',
                end:  '20 May 2017 16:00'
        },
        {
                id: '21 May 2017 10:00',
                title: 'Plant swap weekend  Sunday 21st May - 10:00-4:00',
                start: '21 May 2017 10:00',
                end:  '21 May 2017 16:00'
        },
        {
                id: '27 May 2017 10:00',
                title: 'Plant swap weekend  Saturday 27th May - 10:00-4:00',
                start: '27 May 2017 10:00',
                end:  '27 May 2017 16:00'
        },
        {
                id: '28 May 2017 10:00',
                title: 'Plant swap weekend  Sunday 28th May - 10:00-4:00',
                start: '28 May 2017 10:00',
                end:  '28 May 2017 16:00'
        },
        {
                id: '08 Apr 2017 10:00',
                title: 'Store Open Saturday 8th Apr - 10:00-4:00',
                start: '08 Apr 2017 10:00',
                end:  '08 Apr 2017 16:00'
        },
        {
                id: '15 Apr 2017 10:00',
                title: 'Store Open Saturday 15th Apr - 10:00-12:00',
                start: '15 Apr 2017 10:00',
                end:  '15 Apr 2017 12:00'
        },
        {
                id: '22 Apr 2017 10:00',
                title: 'Store Open Saturday 22nd Apr - 10:00-12:00',
                start: '22 Apr 2017 10:00',
                end:  '22 Apr 2017 12:00'
        },
        {
                id: '29 Apr 2017 10:00',
                title: 'Store Open Saturday 29th Apr - 10:00-12:00',
                start: '29 Apr 2017 10:00',
                end:  '29 Apr 2017 12:00'
        },
        {
                id: '06 May 2017 10:00',
                title: 'Store Open Saturday 6th May - 10:00-12:00',
                start: '06 May 2017 10:00',
                end:  '06 May 2017 12:00'
        },
        {
                id: '07 May 2017 10:00',
                title: 'Store Open Sunday 7th May - 10:00-12:00',
                start: '07 May 2017 10:00',
                end:  '07 May 2017 12:00'
        },
        {
                id: '13 May 2017 10:00',
                title: 'Store Open Saturday 13th May - 10:00-12:00',
                start: '13 May 2017 10:00',
                end:  '08 Apr 2017 12:00'
        },
        {
                id: '14 May 2017 10:00',
                title: 'Store Open Sunday 14th May - 10:00-12:00',
                start: '14 May 2017 10:00',
                end:  '14 May 2017 16:00'
        },
        {
                id: '20 May 2017 10:00',
                title: 'Store Open Saturday 20th May - 10:00-12:00',
                start: '20 May 2017 10:00',
                end:  '20 May 2017 12:00'
        },
        {
                id: '21 May 2017 10:00',
                title: 'Store Open Sunday 21st May - 10:00-12:00',
                start: '21 May 2017 10:00',
                end:  '21 May 2017 12:00'
        },
        {
                id: '27 May 2017 10:00',
                title: 'Store Open Saturday 27th May - 10:00-12:00',
                start: '27 May 2017 10:00',
                end:  '27 May 2017 12:00'
        },
        {
                id: '28 May 2017 10:00',
                title: 'Store Open Sunday 28th May - 10:00-12:00',
                start: '28 May 2017 10:00',
                end:  '28 May 2017 12:00'
        },
        {
                id: '03 Jun 2017 10:00',
                title: 'Store Open Saturday 3rd Jun - 10:00-12:00',
                start: '03 Jun 2017 10:00',
                end:  '03 Jun 2017 12:00'
        },
        {
                id: '10 Jun 2017 10:00',
                title: 'Store Open Saturday 10th Jun - 10:00-12:00',
                start: '10 Jun 2017 10:00',
                end:  '10 Jun 2017 12:00'
        },
        {
                id: '17 Jun 2017 10:00',
                title: 'Store Open Saturday 17th Jun - 10:00-12:00',
                start: '17 Jun 2017 10:00',
                end:  '17 Jun 2017 16:00'
        },
        {
                id: '24 Jun 2017 10:00',
                title: 'Store Open Saturday 24th Jun - 10:00-12:00',
                start: '24 Jun 2017 10:00',
                end:  '24 Jun 2017 12:00'
        },
        {
                id: '01 Jul 2017 10:00',
                title: 'Store Open Saturday 1st Jul - 10:00-12:00',
                start: '01 Jul 2017 10:00',
                end:  '01 Jul 2017 16:00'
        },
        {
                id: '08 Jul 2017 10:00',
                title: 'Store Open Saturday 08 Jul - 10:00-12:00',
                start: '08 Jul 2017 10:00',
                end:  '08 Jul 2017 12:00'
        },
        {
                id: '15 Jul 2017 10:00',
                title: 'Store Open Saturday 15th Jul - 10:00-12:00',
                start: '15 Jul 2017 10:00',
                end:  '15 Jul 2017 12:00'
        },
        {
                id: '22 Jul 2017 10:00',
                title: 'Store Open Saturday 22nd Jul - 10:00-12:00',
                start: '22 Jul 2017 10:00',
                end:  '22 Jul 2017 12:00'
        },
        {
                id: '29 Jul 2017 10:00',
                title: 'Store Open Saturday 29th Jul - 10:00-12:00',
                start: '29 Jul 2017 10:00',
                end:  '29 Jul 2017 12:00'
        },
        {
                id: '22 Apr 2017 10:00',
                title: 'Burnside Volunteering Day Saturday 22nd Apr - 10:00-4:00',
                start: '22 Apr 2017 10:00',
                end:  '22 Apr 2017 16:00',
                newsid: 16
        },
        {
                id: '08 Apr 2017 10:00',
                title: 'Burn-bin at Burnside Saturday 8 Apr - 10:00-4:00',
                start: '01 Apr 2017 10:00',
                end:  '01 Apr 2017 16:00',
                newsid: 10
        },
        {
                id: '01 Apr 2017 09:30',
                title: 'Burn-bin at Burnside Saturday 1 Apr - 9:30-12',
                start: '01 Apr 2017 09:30',
                end:  '01 Apr 2017 12:00',
                newsid: 9
        },
        {
                id: '25 Apr 2017 19:30',
                title: 'Society AGM - Tue 25th April 7:30pm at St Thomas\' Hall',
                start: '25 Apr 2017 19:30',
                end:  '25 Apr 2017 21:30',
                newsid: 8
        },
        {
                id: '19 Feb 2017 10:00',
                title: 'Burn-bin at Burnside Sunday 19 Feb',
                start: '19 Feb 2017 10:00',
                end:  '19 Feb 2017 12:30',
                newsid: 7
        },
        {
                id: '05 Feb 2017 10:00',
                title: 'Seedy Sunday - Trumpington',
                start: '05 Feb 2017 13:30',
                end:  '05 Feb 2017 16:00',
                newsid: 6
        },
        {
                id: '22 Jan 2017 10:00',
                title: 'Burn-bin at Burnside 22 Jan',
                start: '22 Jan 2017 09:30',
                end:  '22 Jan 2017 13:00',
                newsid: 5
        },
        {
                id: '11 Mar 2017 10:00',
                title: 'Burnside Volunteering Day',
                start: '11 Mar 2017 10:00',
                end:  '11 Mar 2017 16:00',
                newsid: 1
        },
        {
                id: '11 Feb 2017 10:00',
                title: 'Seed-potato collection 10-12',
                start: '11 Feb 2017 10:00',
                end: '11 Feb 2017 12:00',
                newsid: 3
        }
    ],
    
    getNext: function() {
        var i, event, found = false, d = new Date(), node, lookups, y, m, n;
        
        function sort(a, b) {
                return (new Date(a.start)).valueOf() - (new Date(b.start)).valueOf();
        }
                
        lookups = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                
        // add in the NSA
        d.setDate(1, 0, 0, 0, 0);
        
        for (i = 0; i < 2; i++) {
            m = lookups[d.getMonth()];
            
            event = {
                id: 'NSA' + i,
                title: 'National Allotment Society - Jobs for ' + m + '...',
                start: '01 ' + m + ' ' + d.getFullYear(),
                forceURL: 'https://www.nsalg.org.uk/growing-advice/monthly-advice/' + m.toLowerCase() +'/',
                allDay: true
            };
                        
            this.events.push(event);
            
            d.setMonth(d.getMonth() + 1);
        }
        
        
        this.events.sort(sort);
        
        // find the first next event
        d = new Date();
        for (i = 0; i < this.events.length; i++) {
            event = this.events[i];
            if ((new Date(event.start)).valueOf() > d.valueOf()) {
                found = true;
                break;
            }
        }
        
        // return the formatted event
        if (found) {
            msg = event.title + '<br><i>' + event.start + '</i>';
        }
        else {
            event = {};
            msg = 'No new events';
        }
        
        //document.getElementById('nextevent').innerHTML = msg;
        nodes = document.getElementsByName('nextevent');
        for (i = 0; i < nodes.length; i++) {
            nodes[i].innerHTML = msg;
            if (found) {
                n = nodes[i].parentNode;
                if (n.hasAttribute('href')) {
                        n.setAttribute('href', 'calendar.php?select=' + encodeURIComponent(event.start));
                }
            }
        }
        return msg;
    }
    
};
